<!DOCTYPE html>
{% extends 'blog_app/base.html' %}
{% block body_block %}
<div class="jumbotron">
    <h1>{{ post.title }}</h1>
    {% if post.published_date %}
    <div>
        <p>Published: {{ post.published_date }}</p>
    </div>
    {% else %}
    {% endif %}
    <p> {{ post.text }} </p>

    
    {% if user.is_authenticated %}
    <a href="{% url 'blog_app:post_publish' pk=post.pk %}" class="btn btn-primary">Publish</a>
    <a href="{% url 'blog_app:post_edit' pk=post.pk %}" class="btn btn-primary"><i class="bi bi-pencil-square"></i></a>
    <a href="{% url 'blog_app:post_remove' pk=post.pk %}" class="btn btn-outline-primary"><i
            class="bi bi-x-square"></i></a>
    {% endif %}

    <hr>

    <a href="{% url 'blog_app:post_comment' pk=post.pk  %}">Add comment</a>
    <div class="container">
        {% for comment in post.comments.all %}
        <br>
        {% if user.is_authenticated or comment.approved_comment %}
        {{ comment.create_date }}
        {% if not comment.comment_approve %}
        <a href="{% url 'blog_app:comment_approve' pk=comment.pk %}" class="btn btn-primary">Post</a>
        <a href="{% url 'blog_app:comment_remove' pk=comment.pk %}" class="btn btn-outline-primary">Cancel</a>
        {% endif %}
        {% endif %}
        <p>{{ comment.text }}</p>
        <p>Published by: {{ comment.author }}</p>
        {% endfor %}
    </div>
</div>
{% endblock %}